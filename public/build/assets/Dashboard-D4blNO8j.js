import{C as M,j as y,p as Z,c as h,o as d,w as m,a as e,e as i,f as B,b as p,F as b,h as x,u as a,P as S,t as l,k as v,q as j,s as D,g as w,W as N}from"./app-MjZD7-rV.js";import{_ as A}from"./AppLayout-DPi4dcBV.js";import{_ as L,a as z}from"./TextInput-BSVIq3Cx.js";import{u as k}from"./composables-Cxa1yBBs.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={id:"crud-modal",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"},R={class:"relative p-4 w-full max-w-md max-h-full"},U={class:"relative bg-white rounded-lg shadow-sm dark:bg-gray-700"},$={class:"p-4 md:p-5"},F={class:""},O={class:"mb-4"},T={class:"mb-4"},W=["value"],q={class:"mb-4"},E={class:"relative max-w-sm"},P={class:"px-6 sm:p-8 md:px-10 lg:px-12"},Y={class:"sm:px-6 lg:px-8"},G={class:"overflow-hidden sm:rounded-lg"},J={class:"border mb-8 p-6 lg:p-8 bg-white border-b border-gray-200"},K={key:0},Q={class:"mb-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},X={class:"text-lg"},ee={class:"flex items-center"},te={class:"text-xs text-yellow-900"},se={class:"text-xs text-yellow-900"},re={class:"bg_yellow_500 h-12 w-12 poppins-bold font-bold flex items-center justify-center rounded"},oe={class:"relative overflow-x-auto shadow-md sm:rounded-lg border border-blue-100"},le={class:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"},ae=["onClick"],de={class:"px-6 py-4"},ie={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},ne={class:"px-6 py-4"},ce={class:"px-6 py-4"},ue={class:"px-6 py-4"},me={class:"px-6 py-4"},he={__name:"Dashboard",props:{ministries:{type:Array,default:null},registers:{type:Object,default:null}},setup(f){const n=f,o=M({name:"",ministryId:1,date:null}),C={chart:{type:"area",stacked:!1,zoom:{type:"x",enabled:!0,autoScaleYaxis:!0},toolbar:{autoSelected:"zoom"}},dataLabels:{enabled:!1},markers:{size:0},fill:{colors:["#4ec3c3","#8fa3ee","#ffe346","#4285F4"],opacity:.9,type:"solid"},yaxis:{labels:{formatter:function(r){return r}}},xaxis:{type:"datetime"},tooltip:{shared:!1,y:{formatter:function(r){return r}}},plotOptions:{bar:{columnWidth:"100%"}}},_=y(()=>{let r=[{name:"Attendance",data:[]}];for(let t in n.registers.data)r[0].data.push({x:n.registers.data[t].date*1e3,y:n.registers.data[t].attendees.length});return r}),V=()=>{o.transform(r=>({...r,ministry_id:o.ministryId})).post(route("registers.store"),{errorBag:"register",preserveScroll:!0,onSuccess:()=>o.reset(),onError:()=>{o.errors.ministry_id,o.errors.date}})},H=r=>{N.get(route("registers.show",{code:r}))},g=y(()=>{const r=n.registers.data.filter(c=>c.active==!0),t=n.registers.data.filter(c=>c.active==!1);return{active:r,all:t}});return(r,t)=>{const c=Z("apexchart");return d(),h(A,{title:"Dashboard"},{heading:m(()=>t[3]||(t[3]=[w("Dashboard")])),breadcrumbs:m(()=>t[4]||(t[4]=[])),actions:m(()=>[t[10]||(t[10]=e("div",{class:"flex justify-center"},[e("button",{"data-modal-target":"crud-modal","data-modal-toggle":"crud-modal",class:"block text-white bg_green_500 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," New Register + ")],-1)),e("div",I,[e("div",R,[e("div",U,[t[9]||(t[9]=e("div",{class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600 border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Create New Register "),e("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-toggle":"crud-modal"},[e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})]),e("span",{class:"sr-only"},"Close modal")])],-1)),e("form",$,[e("div",F,[e("div",O,[t[5]||(t[5]=e("label",{for:"category",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Service Name ",-1)),p(L,{id:"name",ref:"textInput",modelValue:a(o).name,"onUpdate:modelValue":t[0]||(t[0]=s=>a(o).name=s),type:"text",class:"mt-1 block w-full",autocomplete:"new-service-name"},null,8,["modelValue"]),p(z,{message:a(o).errors.name,class:"mt-2"},null,8,["message"])]),e("div",T,[t[6]||(t[6]=e("label",{for:"category",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Register is Under?",-1)),v(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>a(o).ministryId=s),id:"category",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"},[(d(!0),i(b,null,x(f.ministries,(s,u)=>(d(),i("option",{key:u,value:s.id},l(s.name),9,W))),128))],512),[[j,a(o).ministryId]])]),e("div",q,[t[7]||(t[7]=e("label",{for:"date",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Service Date",-1)),e("div",E,[v(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a(o).date=s),type:"date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Select date",required:""},null,512),[[D,a(o).date]])])])]),e("button",{onClick:V,type:"submit",class:"text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},t[8]||(t[8]=[e("svg",{class:"me-1 -ms-1 w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),w(" Add new register ")]))])])])])]),default:m(()=>[e("div",P,[e("div",Y,[e("div",G,[t[14]||(t[14]=e("div",{class:"flex items-center mb-3"},[e("svg",{class:"h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M3 10C3 10.5523 3.44772 11 4 11L12 11C12.5523 11 13 10.5523 13 10V4C13 3.44772 12.5523 3 12 3H4C3.44772 3 3 3.44772 3 4V10ZM11 20C11 20.5523 11.4477 21 12 21H20C20.5523 21 21 20.5523 21 20V14C21 13.4477 20.5523 13 20 13H12C11.4477 13 11 13.4477 11 14V20ZM13 15H19V19H13V15ZM3 20C3 20.5523 3.44772 21 4 21H8C8.55229 21 9 20.5523 9 20V14C9 13.4477 8.55229 13 8 13H4C3.44772 13 3 13.4477 3 14V20ZM5 19V15H7V19H5ZM5 9V5L11 5L11 9L5 9ZM20 11C20.5523 11 21 10.5523 21 10V4C21 3.44772 20.5523 3 20 3H16C15.4477 3 15 3.44772 15 4V10C15 10.5523 15.4477 11 16 11H20ZM19 9H17V5H19V9Z"})]),e("span",{class:"ml-1 text-lg poppins-light"}," Overview ")],-1)),e("div",J,[p(c,{height:"350",type:"bar",options:C,series:_.value},null,8,["series"])]),g.value.active.length>0?(d(),i("div",K,[t[12]||(t[12]=e("div",{class:"flex items-center mb-3"},[e("svg",{class:"h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M19 22H5C3.34315 22 2 20.6569 2 19V3C2 2.44772 2.44772 2 3 2H17C17.5523 2 18 2.44772 18 3V15H22V19C22 20.6569 20.6569 22 19 22ZM18 17V19C18 19.5523 18.4477 20 19 20C19.5523 20 20 19.5523 20 19V17H18ZM16 20V4H4V19C4 19.5523 4.44772 20 5 20H16ZM6 7H14V9H6V7ZM6 11H14V13H6V11ZM6 15H11V17H6V15Z"})]),e("span",{class:"ml-1 text-lg poppins-light"}," Active ")],-1)),e("div",Q,[(d(!0),i(b,null,x(g.value.active,(s,u)=>(d(),h(a(S),{href:r.route("registers.show",{code:s.code}),key:u,class:"mb-4 p-4 lg:p-6 rounded sm:rounded-lg yellow-card border border-yellow-100 flex justify-between"},{default:m(()=>[e("div",null,[e("div",X,l(s.name),1),e("div",ee,[e("div",te,l(a(k)(s.date)),1),t[11]||(t[11]=e("div",{class:"mx-2 h-1 w-1 bg-yellow-900 rounded-full"},null,-1)),e("div",se,l(s.ministry.name),1)])]),e("div",re,l(s.attendees.length),1)]),_:2},1032,["href"]))),128))])])):B("",!0),t[15]||(t[15]=e("div",{class:"flex items-center mb-3"},[e("svg",{class:"h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M21 4H7C5.89543 4 5 4.89543 5 6C5 7.10457 5.89543 8 7 8H21V21C21 21.5523 20.5523 22 20 22H7C4.79086 22 3 20.2091 3 18V6C3 3.79086 4.79086 2 7 2H20C20.5523 2 21 2.44772 21 3V4ZM5 18C5 19.1046 5.89543 20 7 20H19V10H7C6.27143 10 5.58835 9.80521 5 9.46487V18ZM20 7H7C6.44772 7 6 6.55228 6 6C6 5.44772 6.44772 5 7 5H20V7Z"})]),e("span",{class:"ml-1 text-lg poppins-light"}," Attendance Registers ")],-1)),e("div",oe,[e("table",le,[t[13]||(t[13]=e("thead",{class:"text-xs text-gray-700 uppercase bg-blue-100 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Date "),e("th",{scope:"col",class:"px-6 py-3"}," Service Name "),e("th",{scope:"col",class:"px-6 py-3"}," Ministry "),e("th",{scope:"col",class:"px-6 py-3"}," Attendance "),e("th",{scope:"col",class:"px-6 py-3"}," Visitors "),e("th",{scope:"col",class:"px-6 py-3"}," Converts ")])],-1)),e("tbody",null,[(d(!0),i(b,null,x(g.value.all,(s,u)=>(d(),i("tr",{onClick:ge=>H(s.code),key:u,class:"bg-white hover:bg-blue-50 cursor-pointer border-b dark:bg-gray-800 dark:border-gray-700 border-blue-100"},[e("td",de,l(a(k)(s.date)),1),e("th",ie,l(s.name),1),e("td",ne,l(s.ministry.name),1),e("td",ce,l(s.attendees.length),1),e("td",ue,l(),1),e("td",me,l(),1)],8,ae))),128))])])])])])])]),_:1})}}};export{he as default};
