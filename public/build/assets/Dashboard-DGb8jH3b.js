import{d as Z,C as S,j as h,p as B,c as w,o as n,w as i,a as e,e as d,f as D,b as g,F as b,h as x,u as a,P as N,t as r,g as v,k as C,q as $,s as A,W as L}from"./app-IKOqVwLS.js";import{_ as j}from"./AppLayout-Cn_3q2J4.js";import{a as I}from"./DialogModal-dtNR_tTX.js";import{_ as R,a as z}from"./TextInput-BXuUFzrZ.js";import{u as _}from"./composables-C1uTPeU7.js";const U={class:"flex justify-center"},F={class:"p-4 md:p-5"},O={class:""},T={class:"mb-4"},W={class:"mb-4"},q=["value"],E={class:"mb-4"},P={class:"relative"},Y={class:"px-6 sm:p-8 md:px-10 lg:px-12"},G={class:"sm:px-6 lg:px-8"},J={class:"overflow-hidden sm:rounded-lg"},K={class:"border mb-8 p-6 lg:p-8 bg-white border-b border-gray-200"},Q={key:0},X={class:"mb-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ee={class:"text-lg"},te={class:"flex items-center"},se={class:"text-xs text-yellow-900"},oe={class:"text-xs text-yellow-900"},le={class:"bg_yellow_500 h-12 w-12 poppins-bold font-bold flex items-center justify-center rounded"},re={class:"relative overflow-x-auto shadow-md sm:rounded-lg border border-blue-100"},ae={class:"w-full text-sm text-left rtl:text-right text-gray-500"},ne=["onClick"],ie={class:"px-6 py-4"},de={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},ce={class:"px-6 py-4"},ue={class:"px-6 py-4"},me={class:"px-6 py-4"},pe={class:"px-6 py-4"},he={__name:"Dashboard",props:{ministries:{type:Array,default:null},registers:{type:Object,default:null}},setup(y){const c=y,p=Z(!1),l=S({name:"",ministryId:1,date:null}),V={chart:{type:"area",stacked:!1,zoom:{type:"x",enabled:!0,autoScaleYaxis:!0},toolbar:{autoSelected:"zoom"}},dataLabels:{enabled:!1},markers:{size:0},fill:{colors:["#4ec3c3","#8fa3ee","#ffe346","#4285F4"],opacity:.9,type:"solid"},yaxis:{labels:{formatter:function(o){return o}}},xaxis:{type:"datetime"},tooltip:{shared:!1,y:{formatter:function(o){return o}}},plotOptions:{bar:{columnWidth:"100%"}}},H=h(()=>{let o=[{name:"Attendance",data:[]}];for(let t in c.registers.data)o[0].data.push({x:c.registers.data[t].date*1e3,y:c.registers.data[t].attendees.length});return o}),k=()=>{l.transform(o=>({...o,ministry_id:l.ministryId})).post(route("registers.store"),{errorBag:"register",preserveScroll:!0,onSuccess:()=>{l.reset(),p.value=!1},onError:()=>{l.errors.ministry_id,l.errors.date}})},M=o=>{L.get(route("registers.show",{code:o}))},f=h(()=>{const o=c.registers.data.filter(u=>u.active==!0),t=c.registers.data.filter(u=>u.active==!1);return{active:o,all:t}});return(o,t)=>{const u=B("apexchart");return n(),w(j,{title:"Dashboard"},{heading:i(()=>t[5]||(t[5]=[v("Dashboard")])),breadcrumbs:i(()=>t[6]||(t[6]=[])),actions:i(()=>[e("div",U,[e("button",{onClick:t[0]||(t[0]=s=>p.value=!0),class:"block text-white bg_green_500 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center",type:"button"}," New Register + ")]),g(I,{show:p.value,onClose:t[4]||(t[4]=s=>p.value=!1)},{title:i(()=>t[7]||(t[7]=[v(" Create New Register ")])),content:i(()=>[e("form",F,[e("div",O,[e("div",T,[t[8]||(t[8]=e("label",{for:"category",class:"block mb-2 text-sm font-medium text-gray-900"}," Service Name ",-1)),g(R,{id:"name",ref:"textInput",modelValue:a(l).name,"onUpdate:modelValue":t[1]||(t[1]=s=>a(l).name=s),type:"text",class:"mt-1 block w-full",autocomplete:"new-service-name"},null,8,["modelValue"]),g(z,{message:a(l).errors.name,class:"mt-2"},null,8,["message"])]),e("div",W,[t[9]||(t[9]=e("label",{for:"category",class:"block mb-2 text-sm font-medium text-gray-900"},"Register is Under?",-1)),C(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>a(l).ministryId=s),id:"category",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5"},[(n(!0),d(b,null,x(y.ministries,(s,m)=>(n(),d("option",{key:m,value:s.id},r(s.name),9,q))),128))],512),[[$,a(l).ministryId]])]),e("div",E,[t[10]||(t[10]=e("label",{for:"date",class:"block mb-2 text-sm font-medium text-gray-900"},"Service Date",-1)),e("div",P,[C(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>a(l).date=s),type:"date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5",placeholder:"Select date",required:""},null,512),[[A,a(l).date]])])])])])]),footer:i(()=>[e("button",{onClick:k,type:"button",class:"text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},t[11]||(t[11]=[e("svg",{class:"me-1 -ms-1 w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),v(" Add new register ")]))]),_:1},8,["show"])]),default:i(()=>[e("div",Y,[e("div",G,[e("div",J,[t[15]||(t[15]=e("div",{class:"flex items-center mb-3"},[e("svg",{class:"h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M3 10C3 10.5523 3.44772 11 4 11L12 11C12.5523 11 13 10.5523 13 10V4C13 3.44772 12.5523 3 12 3H4C3.44772 3 3 3.44772 3 4V10ZM11 20C11 20.5523 11.4477 21 12 21H20C20.5523 21 21 20.5523 21 20V14C21 13.4477 20.5523 13 20 13H12C11.4477 13 11 13.4477 11 14V20ZM13 15H19V19H13V15ZM3 20C3 20.5523 3.44772 21 4 21H8C8.55229 21 9 20.5523 9 20V14C9 13.4477 8.55229 13 8 13H4C3.44772 13 3 13.4477 3 14V20ZM5 19V15H7V19H5ZM5 9V5L11 5L11 9L5 9ZM20 11C20.5523 11 21 10.5523 21 10V4C21 3.44772 20.5523 3 20 3H16C15.4477 3 15 3.44772 15 4V10C15 10.5523 15.4477 11 16 11H20ZM19 9H17V5H19V9Z"})]),e("span",{class:"ml-1 text-lg poppins-light"}," Overview ")],-1)),e("div",K,[g(u,{height:"350",type:"bar",options:V,series:H.value},null,8,["series"])]),f.value.active.length>0?(n(),d("div",Q,[t[13]||(t[13]=e("div",{class:"flex items-center mb-3"},[e("svg",{class:"h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M19 22H5C3.34315 22 2 20.6569 2 19V3C2 2.44772 2.44772 2 3 2H17C17.5523 2 18 2.44772 18 3V15H22V19C22 20.6569 20.6569 22 19 22ZM18 17V19C18 19.5523 18.4477 20 19 20C19.5523 20 20 19.5523 20 19V17H18ZM16 20V4H4V19C4 19.5523 4.44772 20 5 20H16ZM6 7H14V9H6V7ZM6 11H14V13H6V11ZM6 15H11V17H6V15Z"})]),e("span",{class:"ml-1 text-lg poppins-light"}," Active ")],-1)),e("div",X,[(n(!0),d(b,null,x(f.value.active,(s,m)=>(n(),w(a(N),{href:o.route("registers.show",{code:s.code}),key:m,class:"mb-4 p-4 lg:p-6 rounded sm:rounded-lg yellow-card border border-yellow-100 flex justify-between"},{default:i(()=>[e("div",null,[e("div",ee,r(s.name),1),e("div",te,[e("div",se,r(a(_)(s.date)),1),t[12]||(t[12]=e("div",{class:"mx-2 h-1 w-1 bg-yellow-900 rounded-full"},null,-1)),e("div",oe,r(s.ministry.name),1)])]),e("div",le,r(s.attendees.length),1)]),_:2},1032,["href"]))),128))])])):D("",!0),t[16]||(t[16]=e("div",{class:"flex items-center mb-3"},[e("svg",{class:"h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M21 4H7C5.89543 4 5 4.89543 5 6C5 7.10457 5.89543 8 7 8H21V21C21 21.5523 20.5523 22 20 22H7C4.79086 22 3 20.2091 3 18V6C3 3.79086 4.79086 2 7 2H20C20.5523 2 21 2.44772 21 3V4ZM5 18C5 19.1046 5.89543 20 7 20H19V10H7C6.27143 10 5.58835 9.80521 5 9.46487V18ZM20 7H7C6.44772 7 6 6.55228 6 6C6 5.44772 6.44772 5 7 5H20V7Z"})]),e("span",{class:"ml-1 text-lg poppins-light"}," Attendance Registers ")],-1)),e("div",re,[e("table",ae,[t[14]||(t[14]=e("thead",{class:"text-xs text-gray-700 uppercase bg-blue-100"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Date "),e("th",{scope:"col",class:"px-6 py-3"}," Service Name "),e("th",{scope:"col",class:"px-6 py-3"}," Ministry "),e("th",{scope:"col",class:"px-6 py-3"}," Attendance "),e("th",{scope:"col",class:"px-6 py-3"}," Visitors "),e("th",{scope:"col",class:"px-6 py-3"}," Converts ")])],-1)),e("tbody",null,[(n(!0),d(b,null,x(f.value.all,(s,m)=>(n(),d("tr",{onClick:ge=>M(s.code),key:m,class:"bg-white hover:bg-blue-50 cursor-pointer border-b border-blue-100"},[e("td",ie,r(a(_)(s.date)),1),e("th",de,r(s.name),1),e("td",ce,r(s.ministry.name),1),e("td",ue,r(s.attendees.length),1),e("td",me,r(),1),e("td",pe,r(),1)],8,ne))),128))])])])])])])]),_:1})}}};export{he as default};
